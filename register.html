<!DOCTYPE html>
<html lang="en">
    <style>
        .form-signin {
           position: absolute;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
       }
    </style> 

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ShareDudes</title>
  <link rel="stylesheet" href="main.css">
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>

  <nav class="navbar sticky-top navbar-expand-sm navbar-dark bg-primary">
    <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
      <ul class="navbar-nav mr-auto">
        <a class="navbar-brand mx-auto p-2" href="index.html">
          <img src="icon/icon.png" width="40" height="40" class="d-inline-block align-center" alt="">
          ShareDudes</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".dual-collapse2">
            <span class="navbar-toggler-icon"></span>
        </button>
      </ul>
  </div>

  <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="login.html">Anmelden</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="register.html">Registrieren</a>
        </li>
      </ul>
  </div>
</nav>

<form class="form-signin" onsubmit="submitForm()">
    <h1 class="h3 mb-3 p-2 font-weight-normal">Registriere dich</h1>
    <input type="userName" id="inputUserName" class="form-control" placeholder="Benutzername" required="true" autofocus="">
    <h1></h1> 
    <input type="email" id="inputEmail" class="form-control" placeholder="Email Adresse" required="true" autofocus="">
    <h1></h1> 
    <input type="password" id="inputPassword" class="form-control" placeholder="Passwort" required="true">
    <h1></h1>
    <input type="Street" id="inputStreet" class="form-control" placeholder="Straße" required="true" autofocus="">
    <h1></h1> 
    <input type="StreetNumber" id="inputStreetNumber" class="form-control" placeholder="Hausnummer" required="true" autofocus="">
    <h1></h1>
    <input type="PostalCode" id="inputPostalCode" class="form-control" placeholder="PLZ" required="true" autofocus="">
    <h1></h1>
    <input type="City" id="inputCity" class="form-control" placeholder="Ort" required="true" autofocus="">
    <h1></h1>
    <select class="form-select" aria-label="Default select example" id = "inputState">
      <option value="1">Baden-Württemberg</option>
      <option value="2">Bayern</option>
      <option value="3">Berlin</option>
      <option value="4">Brandenburg</option>
      <option value="5">Bremen</option>
      <option value="6">Hamburg</option>
      <option value="7">Hessen</option>
      <option value="8">Mecklenburg-Vorpommern</option>
      <option value="9">Niedersachsen</option>
      <option value="10">Nordrhein-Westfalen</option>
      <option value="11">Rheinland-Pfalz</option>
      <option value="12">Saarland</option>
      <option value="13">Sachsen</option>
      <option value="14">Sachsen-Anhalt</option>
      <option value="15">Schleswig-Holstein</option>
      <option value="16">Thüringen</option>
    </select>
    <h1></h1>
    <label for="inputDate">Geburtsdatum</label>
    <input id="inputDate" class="form-control" type="date" placeholder="Geburtsdatum"/>
    <h1></h1>   
    <button class="btn btn-lg btn-primary btn-block w-100" type="submit">Registrieren</button>
</form>

<button onclick="submitForm()">test</button>

<script>
    function setCookie(name, value, days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
    }

    function submitForm() {
    var name = document.getElementById("inputUserName").value;
    var mail = document.getElementById("inputEmail").value;
    var pw = document.getElementById("inputPassword").value;
    var street = document.getElementById("inputStreet").value;
    var streetNr = document.getElementById("inputStreetNumber").value;
    var postal = document.getElementById("inputPostalCode").value;
    var city = document.getElementById("inputCity").value;
    var state = document.getElementById("inputState").value;
    var birthdate = document.getElementById("inputDate").value;
    
    var params = {
    username: name,
    email_address: mail,
    password: pw,
    street: street,
    streetNumber: streetNr,
    postalCode: postal,
    city: city,
    state: state,
    birthdate: birthdate,
    is_admin: "true",
    };

    alert("jo start");
    $.ajax({
        type: 'POST',
        url: 'http://194.62.1.218:5000/createuser',  // Die URL, an die der POST-Request gesendet wird
        contentType: 'application/json',  // Der Content-Type der Anfrage (hier JSON)
        data: JSON.stringify(params),  // Die Daten, die als JSON übertragen werden sollen
        complete: function(responseData) {
          alert('Erfolgreicher AJAX POST Request. Response: eigener text');
          setCookie("benutzername", name, 30);
          alert('cookie gesetzt vom ding her');
          window.location.href = "index.html"
        }
    });
    
    alert("jo fertsch");
  }
</script>
</body>
</html>