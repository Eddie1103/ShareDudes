<!DOCTYPE html>
<html lang="en">
<style>
  img {
    display: block;
    max-width: 100%;
    height: auto;
  }
</style>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ShareDudes</title>
  <link rel="stylesheet" href="main.css">
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
    integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
    crossorigin="anonymous"></script>
</head>

<body>
  <!--Navbar-->
  <nav class="navbar sticky-top navbar-expand-sm navbar-dark bg-primary">
    <a class="navbar-brand mx-2" href="index.html?#">
      <img src="icon/icon.png" width="40" height="40" class="d-inline-block align-center" alt="">
      ShareDudes
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".dual-collapse2">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-collapse collapse w-75 order-0 order-md-0 dual-collapse2">
    </div>
    <div class="navbar-collapse collapse w-100 order-1 dual-collapse2">
      <form class="input-group">
        <input class="form-control" type="search" placeholder="Suchen" aria-label="Suchen">
        <button class="btn btn-secondary" type="submit">Angebot suchen</button>
      </form>
    </div>
    <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
      <ul class="navbar-nav ms-auto align-center">
        <li class="nav-item">
          <a class="nav-link active align-items-center" aria-current="page" href="login.html?#"
            id="logintext">Anmelden</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active align-items-center" aria-current="page" href="register.html?#"
            id="registertext">Registrieren</a>
        </li>
      </ul>
    </div>
  </nav>

  <!--Create Inserat Button-->
  <div class="text-center p-2">
    <button type="button" data-toggle="modal" data-target=".createModal" class="btn btn-lg btn-secondary"
      id="createButton" onclick="loadOptions()">Eigenes Inserat veröffentlichen</button>
  </div>

  <!--Modal Create Inserat-->
  <div class="modal fade createModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <form class="form-signin p-3">
          <h1 class="h3 mb-3 font-weight-normal">Eigenes Inserat</h1>
          <input type="Title" id="inputTitle" class="form-control" placeholder="Inserattitel" required="" autofocus="">
          <h1></h1>
          <label for="inputOfferTypes">Inseratart</label>
          <select class="form-select" aria-label="Default select example" id="inputOfferTypes">
            <option value="1">Aktivitäten</option>
            <option value="2">Verleih</option>
            <option value="3">Bereitstellung</option>
            <option value="4">Hilfsleistung</option>
            <option value="5">Information</option>   
            <option value="6">Information</option>         
          </select>
          <h1></h1>
          <div class="form-group">
            <label for="DescriptionTextarea">Beschreibung für dein Inserat</label>
            <textarea class="form-control" id="DecriptionTextarea" rows="3"></textarea>
          </div>
          <h1></h1>
          <div class="col-md-4 m-5 my-1">
            <div class="mb-4 d-flex ml-auto">
                <img id="selectedImage" src="https://mdbootstrap.com/img/Photos/Others/placeholder.jpg" alt="moiga" style="width: 300px;" />
            </div>
            <div class="d-flex">
                <div class="btn btn-primary btn-rounded">
                    <label class="form-label text-white m-1" for="customFile1">Bild auswählen</label>
                    <input type="file" class="form-control d-none" accept=".png" id="customFile1" onchange="displaySelectedImage(event, 'selectedImage')" />
                </div>
            </div>
          </div>
          <h1></h1>
          <button class="btn btn-lg btn-secondary btn-block w-100" type="submit">Veröffentlichen</button>
        </form>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row justify-content-center no-gutters m-2 p-1">
      <div class="col-lg-4 mb-3 mx-3 d-flex align-items-stretch">
        <div class="card">
          <img src="https://bbq-piraten.de/community/data/attachments/351/351068-07b61497a93c18894bdb5a9aa675b686.jpg" class="card-img-top" alt="Card Image">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Habe Rouladen übrig!</h5>
            <p class="card-text mb-4">Habe eine größere Portion gekocht aber der Hunger war größer als der Magen, würde so 3 Stück abgegeben!</p>
            <a class="btn btn-primary stretched-link" data-toggle="modal" data-target="#exampleModalCenter" onclick="loadInseratData('Habe Rouladen lol')">Zur Anzeige</a>
          </div>
        </div>
      </div>

      <div class="col-lg-4 mb-3 mx-3 d-flex align-items-stretch">
        <div class="card">
          <img src="https://img.kleinanzeigen.de/api/v1/prod-ads/images/e2/e27767ff-fadb-4430-9d68-c9beec8f9ecf?rule=$_59.JPG" class="card-img-top" alt="Card Image">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Waschmaschine zu verleihen</h5>
            <p class="card-text mb-4">Hallo, ich würde gerne meine Waschmaschine zur Verfügung stellen während ich im Urlaub bin, einfach anfragen!</p>
            <a class="btn btn-primary stretched-link" data-toggle="modal" data-target="#exampleModalCenter">Zur Anzeige</a>
          </div>
        </div>
      </div>



    <div class="row justify-content-center m-2 p-1">
      <div class="col-lg-4 mb-3 mx-3 d-flex align-items-stretch">
        <div class="card">
          <img src="https://upload.wikimedia.org/wikipedia/commons/a/ab/Schrebergarten_1.jpg" class="card-img-top" alt="Card Image">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Gartenbeet frei!</h5>
            <p class="card-text mb-4">Hallihallo, habe in meinem Garten noch ein Beet frei, zuletzt waren dort Tomaten gepflanzt aber dieses Jahr habe ich keine Lust. Wenn jemand an diesem Platz anpflanzen möchte einfach melden!</p>
            <a class="btn btn-primary stretched-link" data-toggle="modal" data-target="#exampleModalCenter">Zur Anzeige</a>
          </div>
        </div>
      </div>

      <div class="col-lg-4 mb-3 mx-3 d-flex align-items-stretch">
        <div class="card">
          <img src="https://www.zooroyal.de/magazin/wp-content/uploads/2017/08/hund-in-der-spaziergang-760x570.jpg" class="card-img-top" alt="Card Image">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Linus brauch einen Aufpasser</h5>
            <p class="card-text mb-4">Hey Community, mein Hund Linus ist eine Woche auf sich allein gestellt da ich im Urlaub bin, bevor ich Angehörige nerve, frage ich ob sich hier vielleicht jemand findet! Mehr Infos nach Anfrage.</p>
            <a class="btn btn-primary stretched-link" data-toggle="modal" data-target="#exampleModalCenter">Zur Anzeige</a>
          </div>
        </div>
      </div>



    <div class="row justify-content-center m-2 p-1">
      <div class="col-lg-4 mb-3 mx-3 d-flex align-items-stretch">
        <div class="card">
          <img src="https://cdn.germanscooterforum.de/monthly_04_2008/post-5890-1207589007_thumb.jpg" class="card-img-top" alt="Card Image">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Verschenke rostige Mühle</h5>
            <p class="card-text mb-4">Kein Bock mehr auf das Fahrrad in meinem Keller, steht nur rum und nimmt Platz weg. Wer es gerne haben möchte meldet sich.</p>
            <a class="btn btn-primary stretched-link" data-toggle="modal" data-target="#exampleModalCenter">Zur Anzeige</a>
          </div>
        </div>
      </div>

      <div class="col-lg-4 mb-3 mx-3 d-flex align-items-stretch">
        <div class="card">
          <img src="https://light-microscope.net/wp-content/uploads/2019/05/Steroanlage.jpg" class="card-img-top" alt="Card Image">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Alte Musikanlage kaputt</h5>
            <p class="card-text mb-4">Meine alte Stereoanlage macht Probleme, kann jemand mit Kentnissen mir helfen? Entlohnung folgt Selbstverständlich.</p>
            <a class="btn btn-primary stretched-link" data-toggle="modal" data-target="#exampleModalCenter">Zur Anzeige</a>
          </div>
        </div>
      </div>
    </div>


    <!--Modal zum Angebot anzeigen-->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
      aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Habe Rouladen übrig!</h5>
            <button type="button" class="btn-close" aria-label="Close" data-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="row row-no-margin">
              <div class="col-xs-12 col-sm-6 mx-auto w-100">
                <img
                  src="https://bbq-piraten.de/community/data/attachments/351/351068-07b61497a93c18894bdb5a9aa675b686.jpg" class="rounded" alt="...">
              </div>
            </div>
            <div class="p-3 row row-no-margin">
              Habe eine größere Portion gekocht aber der Hunger war größer als der Magen, würde so 3 Stück abgegeben!
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Schließen</button>
            <button type="button" class="btn btn-secondary">Für Inserat anmelden</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function loadInseratData(inseratName) {
      var x = document.getElementById("exampleModalLongTitle");
      x.innerHTML(inseratName);
      alert("test");
    }

    function isUserLoggedIn(cookieName) {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i].trim();

        if (cookie.indexOf(cookieName + "=") === 0) {
          return true;
        }
      }
      return false;
    }

    function removeCookie(cookieName) {
      document.cookie = cookieName + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      location.reload();
    }

    function updateLoginStatusText() {
      var loginStatusTextElement = document.getElementById('logintext');
      var registerStatusTextElement = document.getElementById('registertext');

      if (isUserLoggedIn("benutzername")) {
        var imgElement = document.createElement('img');
        imgElement.src = 'https://images.unsplash.com/photo-1561154464-82e9adf32764?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=50&h=50&q=60';
        imgElement.alt = 'Profilbild';
        imgElement.style.cursor = 'pointer';
        imgElement.classList.add('rounded-circle', 'img-fluid')
        loginStatusTextElement.parentNode.replaceChild(imgElement, loginStatusTextElement);

        imgElement.addEventListener('click', function () {
          window.location.href = 'user.html?#';
        });

        var logoutbutton = document.createElement('button');
        logoutbutton.textContent = 'Abmelden';
        logoutbutton.onclick = function () {
          removeCookie("benutzername");
        };
        logoutbutton.classList.add('btn-secondary', 'btn', 'my-2', 'm-1');

        registerStatusTextElement.parentNode.replaceChild(logoutbutton, registerStatusTextElement);
      }
      else {
        var create = document.getElementById("createButton").style.display = 'none';

      }
    }
    updateLoginStatusText();

    //im moment unbenutzt
    function displaySelectedImage(event, elementId) {
      const selectedImage = document.getElementById(elementId);
      const fileInput = event.target;

      if (fileInput.files && fileInput.files[0]) {
        const reader = new FileReader();

        reader.onload = function (e) {
          selectedImage.src = e.target.result;
        };

        reader.readAsDataURL(fileInput.files[0]);
      }
    }

    function loadOptions() {
      var apiUrl = 'http://194.62.1.218:5000/getoffertypes';

      var selectElement = document.getElementById("inputOfferType");
      $.ajax({
        url: apiUrl,
        type: 'GET',
        dataType: 'json',
        complete: function (data) {
          alert("complete ding");
          var newOption = document.createElement("option");
          newOption.value = 1;
          newOption.text = "test";
        }
      });
      alert("request fertsch");
    }
  </script>
</body>

</html>